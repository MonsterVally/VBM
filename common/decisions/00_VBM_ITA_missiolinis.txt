ITA_missiolinis = {
	DEBUG_MISSIOLINIS_FASTER_TACK = {
		priority = 100
		allowed = {
			tag = ITA
		}

		visible = {
			is_debug = yes
			NOT = { has_country_flag = ITA_missiolinis_faster_missions_flag }
		}

		complete_effect = {
			set_country_flag = ITA_missiolinis_faster_missions_flag

			set_variable = { ITA_missiolinis_conquer_ethiopia_days = 3 }
			set_variable = { ITA_missiolinis_pacify_ethiopia_days = 3 }
			set_variable = { ITA_missiolinis_default_days = 3 }
		}
	}

	DEBUG_MISSIOLINIS_BACK_TO_NORMAL = {
		priority = 100
		allowed = {
			tag = ITA
		}

		visible = {
			is_debug = yes
			has_country_flag = ITA_missiolinis_faster_missions_flag
		}

		complete_effect = {
			clr_country_flag = ITA_missiolinis_faster_missions_flag

			set_variable = { ITA_missiolinis_conquer_ethiopia_days = 170 }
			set_variable = { ITA_missiolinis_pacify_ethiopia_days = 720 }
			set_variable = { ITA_missiolinis_default_days = 350 }
		}
	}

	# Hold the north "dummy" mission for Italy
	ITA_conquer_the_north_mission = {
		icon = GFX_decision_generic_operation

		allowed = {
			tag = ITA
		}

		available = { #GOAL
			OR = {
				has_country_flag = ITA_victory_in_ethiopia_flag
				count_triggers = {
					amount = 2
					# 841 = { is_controlled_by = ROOT }
					# 842 = { is_controlled_by = ROOT }
					# 843 = { is_controlled_by = ROOT }
					controls_province = 1984
					controls_province = 2072
					controls_province = 5097
				}
			}
		}

		activation = {
			always = no
		}

		visible = {
			ITA_missiolinis_system_available = yes
			has_global_flag = second_italo_ethiopian_war_flag
			NOT = { has_country_flag = ITA_victory_in_ethiopia_flag } #If Italy peaces out with ETH, the mission just cancels instead of failing
		}

		highlight_states = {
			highlight_state_targets = {
				state = 841 #BEGEMDER
				state = 842 #TIGRAY
				state = 843 #WELLO
			}
			#highlight_provinces = {
			#	1984
			#	#2072
			#	#5097
			#}
			highlight_color_while_active = 3
			highlight_color_before_active = 2
		}

		#highlight_states = {
		#	highlight_states_trigger = {
		#		OR = {
		#			state = 841 #BEGEMDER
		#			state = 842 #TIGRAY
		#			state = 843 #WELLO
		#		}
		#	}
		#	highlight_color_while_active = 2
		#}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = ETH.ETH_hold_the_north_time

		cancel_effect = {
			if = { #MISSION SUCCEEDED
				limit = {
					OR = {
						has_country_flag = ITA_victory_in_ethiopia_flag
						count_triggers = {
							amount = 2
							# 841 = { is_controlled_by = ROOT }
							# 842 = { is_controlled_by = ROOT }
							# 843 = { is_controlled_by = ROOT }
							controls_province = 1984
							controls_province = 2072
							controls_province = 5097
						}
						hidden_trigger = {
							NOT = { has_global_flag = second_italo_ethiopian_war_flag }
							hidden_trigger = { NOT = { has_country_flag = ITA_defeat_in_ethiopia_flag } }
						}
					}
				}
				country_event = { id = BBA_italy_missiolinis.03_north hours = 1 }
			}
			else = { #MISSION FAILED
				#Prepare next mission
				if = {
					limit = {
						NOT = { has_active_mission = ITA_conquer_the_south_mission }
						ITA_missiolinis_system_available = yes
					}
					ITA_missiolinis_manage_next_mission = yes
				}

				if = {
					limit = {
						NOT = { has_country_flag = ITA_missiolini_conquer_the_south_failed_flag }
					}
					set_country_flag = ITA_missiolini_conquer_the_north_failed_flag
					#log = "Adding North flag"
				}

				country_event = { id = BBA_italy_missiolinis.02_north hours = 1 }
			}
		}

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_progress_in_ethiopia_failure_effect = yes
			}

			hidden_effect = {
				#Prepare next mission
				if = {
					limit = {
						NOT = { has_active_mission = ITA_conquer_the_south_mission }
						ITA_missiolinis_system_available = yes
					}
					ITA_missiolinis_manage_next_mission = yes
				}

				if = {
					limit = {
						NOT = { has_country_flag = ITA_missiolini_conquer_the_south_failed_flag }
					}
					set_country_flag = ITA_missiolini_conquer_the_north_failed_flag
					#log = "Adding North flag"
				}

				country_event = { id = BBA_italy_missiolinis.02_north hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				vbm_ITA_missiolini_progress_in_ethiopia_success_effect = yes
			}

			hidden_effect = {
				#Prepare next mission
				if = {
					limit = {
						NOT = { has_active_mission = ITA_conquer_the_south_mission }
						ITA_missiolinis_system_available = yes
					}
					ITA_missiolinis_manage_next_mission = yes
				}

				if = {
					limit = {
						NOT = { has_country_flag = ITA_missiolini_conquer_the_south_succeeded_flag }
					}
					set_country_flag = ITA_missiolini_conquer_the_north_succeeded_flag
				}

				country_event = { id = BBA_italy_missiolinis.03_north hours = 1 }
			}
		}
	}

	# Hold the south "dummy" mission for Italy
	ITA_conquer_the_south_mission = {
		icon = GFX_decision_generic_operation
		allowed = { tag = ITA }

		available = { #GOAL
			OR = {
				has_country_flag = ITA_victory_in_ethiopia_flag
				count_triggers = {
					amount = 2
					# 835 = { is_controlled_by = ROOT }
					# 836 = { is_controlled_by = ROOT }
					# 837 = { is_controlled_by = ROOT }
					controls_province = 12812
					controls_province = 10775
					controls_province = 13247
				}
			}
		}

		activation = {
			always = no
		}

		visible = {
			ITA_missiolinis_system_available = yes
			has_global_flag = second_italo_ethiopian_war_flag
			NOT = { has_country_flag = ITA_victory_in_ethiopia_flag } #If Italy peaces out with ETH, the mission just cancels instead of failing
		}

		highlight_states = {
			highlight_states_trigger = {
				OR = {
					state = 835 #HARARGHE
					state = 836 #BALE
					state = 837 #SIDAMO
				}
			}
			highlight_color_while_active = 2
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = ETH.ETH_hold_the_south_time

		cancel_effect = {
			if = { #MISSION SUCCEEDED
				limit = {
					OR = {
						has_country_flag = ITA_victory_in_ethiopia_flag
						count_triggers = {
							amount = 2
							# 835 = { is_controlled_by = ROOT }
							# 836 = { is_controlled_by = ROOT }
							# 837 = { is_controlled_by = ROOT }
							controls_province = 12812
							controls_province = 10775
							controls_province = 13247
						}
						hidden_trigger = {
							NOT = { has_global_flag = second_italo_ethiopian_war_flag }
							hidden_trigger = { NOT = { has_country_flag = ITA_defeat_in_ethiopia_flag } }
						}
					}
				}
				country_event = { id = BBA_italy_missiolinis.05_south hours = 1 }
			}
			else = { #MISSION FAILED
				if = {
					limit = {
						NOT = { has_country_flag = ITA_missiolini_conquer_the_north_failed_flag }
					}
					set_country_flag = ITA_missiolini_conquer_the_south_failed_flag
					#log = "Adding South flag"
				}

				country_event = { id = BBA_italy_missiolinis.04_south hours = 1 }
			}
		}

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_progress_in_ethiopia_failure_effect = yes
			}

			hidden_effect = {
				#Prepare next mission
				if = {
					limit = {
						NOT = { has_active_mission = ITA_conquer_the_south_mission }
						ITA_missiolinis_system_available = yes
					}
					ITA_missiolinis_manage_next_mission = yes
				}

				if = {
					limit = {
						NOT = { has_country_flag = ITA_missiolini_conquer_the_north_failed_flag }
					}
					set_country_flag = ITA_missiolini_conquer_the_south_failed_flag
					#log = "Adding South flag"
				}
				country_event = { id = BBA_italy_missiolinis.04_south hours = 1 } #Triggered one hour later for event options purposes
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				vbm_ITA_missiolini_progress_in_ethiopia_success_effect = yes
			}

			hidden_effect = {
				#Prepare next mission
				if = {
					limit = {
						NOT = { has_active_mission = ITA_conquer_the_south_mission }
						ITA_missiolinis_system_available = yes
					}
					ITA_missiolinis_manage_next_mission = yes
				}

				if = {
					limit = {
						NOT = { has_country_flag = ITA_missiolini_conquer_the_north_succeeded_flag }
					}
					set_country_flag = ITA_missiolini_conquer_the_south_succeeded_flag
				}

				country_event = { id = BBA_italy_missiolinis.05_south hours = 1 }
			}
		}
	}

	# Conquer Ethiopia
	ITA_missiolini_conquer_ethiopia = {
		icon = GFX_decision_generic_prepare_civil_war
		allowed = { tag = ITA }

		visible = {
			ITA_missiolinis_system_available = yes
			hidden_trigger = { NOT = { has_country_flag = ITA_defeat_in_ethiopia_flag } }
		}

		available = { #GOAL
			NOT = { has_global_flag = second_italo_ethiopian_war_flag }
			hidden_trigger = { NOT = { has_country_flag = ITA_defeat_in_ethiopia_flag } }
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_conquer_ethiopia_days

		cancel_effect = {
			if = { #Succeeded
				limit = {
					NOT = { has_country_flag = ITA_defeat_in_ethiopia_flag }
				}
				country_event = { id = BBA_italy_missiolinis.13 hours = 1 }
			}
			else = { #Failed
				country_event = { id = BBA_italy_missiolinis.12 hours = 1 }
			}
		}

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_conquer_ethiopia_failure_effect = yes
			}

			hidden_effect = {
				#Prepare next mission
				ITA_missiolinis_manage_next_mission = yes

				country_event = { id = BBA_italy_missiolinis.12 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_conquer_ethiopia_success_effect = yes
			}

			hidden_effect = {
				#Prepare next mission
				ITA_missiolinis_manage_next_mission = yes

				country_event = { id = BBA_italy_missiolinis.13 hours = 1 }
			}
		}
	}

	# Pacify Ethiopia - BBA
	ITA_missiolini_pacify_ethiopia = {
		icon = GFX_decision_generic_police_action
		allowed = {
			tag = ITA
			has_dlc = "By Blood Alone"
		}

		available = { #GOAL
			custom_trigger_tooltip = {
				tooltip = ITA_pacify_ethiopia_goal_tt
				all_of_scopes = {
					array = ITA_initial_ethiopian_states
					OR = {
						compliance > 60 #WARNING THIS VALUE NEEDS TO MATCH THE ONE IN EVENT TRIGGER
						controller = { is_subject_of = ROOT }
					}
				}
			}
		}

		activation = {
			always = no
		}

		visible = {
			has_global_flag = second_italo_ethiopian_war_flag
		}

		#cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_pacify_ethiopia_days

		cancel_trigger = {
			hidden_trigger = { ITA_missiolinis_system_available = no }
		}

		cancel_effect = {
			if = { #Succeeded
				limit = {
					all_of_scopes = {
						array = ITA_initial_ethiopian_states
						is_owned_by = ROOT
					}
				}
				country_event = { id = BBA_italy_missiolinis.23 hours = 1 }
			}
			else = { #Failed
				country_event = { id = BBA_italy_missiolinis.22 hours = 1 }
			}
		}

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_pacify_ethiopia_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.22 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_pacify_ethiopia_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.23 hours = 1 }
			}
		}
	}

	# Pacify Ethiopia - NO BBA
	ITA_missiolini_pacify_ethiopia_vanilla = {
		icon = GFX_decision_generic_police_action
		allowed = {
			tag = ITA
			NOT = { has_dlc = "By Blood Alone"}
		}

		available = { #GOAL
			custom_trigger_tooltip = {
				tooltip = ITA_pacify_ethiopia_goal_tt
				all_of_scopes = {
					array = ITA_initial_ethiopian_states
					OR = {
						compliance > 60 #WARNING THIS VALUE NEEDS TO MATCH THE ONE IN EVENT TRIGGER
						controller = { is_subject_of = ROOT }
					}
				}
			}
		}

		activation = {
			always = no
		}

		visible = {
			has_global_flag = second_italo_ethiopian_war_flag
		}

		#cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		fire_only_once = yes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_pacify_ethiopia_days

		cancel_trigger = {
			hidden_trigger = { ITA_missiolinis_system_available = no }
		}

		cancel_effect = {
			if = { #Succeeded
				limit = {
					all_of_scopes = {
						array = ITA_initial_ethiopian_states
						compliance > 60
					}
				}
				log = "Success"
				country_event = { id = BBA_italy_missiolinis.23 hours = 1 }
			}
			else = { #Failed
				log = "Failure"
				country_event = { id = BBA_italy_missiolinis.22 hours = 1 }
			}
		}

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_pacify_ethiopia_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.22 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_pacify_ethiopia_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.23 hours = 1 }
			}
		}
	}

	# Strengthen Heavy Industry
	ITA_missiolini_strengthen_heavy_industry = {
		icon = GFX_decision_generic_merge_plant_materiel
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			custom_trigger_tooltip = {
				tooltip = ITA_missiolini_strengthen_heavy_industry_trigger_tt
				num_of_civilian_factories > ROOT.ITA_missiolinis_required_civs
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_strengthen_heavy_industry_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.32 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_strengthen_heavy_industry_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.33 hours = 1 }
			}
		}
	}

	# Strengthen the Army
	ITA_missiolini_strengthen_the_army = {
		icon = GFX_decision_generic_military
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			if = {
				limit = {
					ITA_has_missiolini_easier_goals = yes
				}
				has_army_manpower = { size > 650000 } #650k
			}
			else = {
				has_army_manpower = { size > 750000 } #750k
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_strengthen_the_army_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.42 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_strengthen_the_army_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.43 hours = 1 }
			}
		}
	}

	# Stockpile Trucks
	ITA_missiolini_stockpile_trucks = {
		icon = GFX_decision_generic_trucks
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			has_equipment = {
				motorized_equipment_1 > ROOT.ITA_missiolinis_trucks_to_produce
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_stockpile_trucks_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.52 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_stockpile_trucks_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.53 hours = 1 }
			}
		}
	}

	# Stockpile fuel
	ITA_missiolini_stockpile_fuel = {
		icon = GFX_decision_oil
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			has_fuel > 500000
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_stockpile_fuel_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.62 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_stockpile_fuel_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.63 hours = 1 }
			}
		}
	}

	# Strengthen the Airforce
	ITA_missiolini_strengthen_the_airforce = {
		icon = GFX_decision_generic_merge_plant_aircraft
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			#Fighters
			custom_trigger_tooltip = {
				tooltip = ITA_missiolini_strengthen_the_airforce_fighters_goal_tt
				#Fighters
				set_temp_variable = { current_fighters = num_equipment@small_plane_airframe }
				add_to_temp_variable = { current_fighters = num_deployed_planes_with_type@small_plane_airframe }
				##CV Fighters
				#add_to_temp_variable = { current_fighters = num_equipment@cv_small_plane_airframe }
				#add_to_temp_variable = { current_fighters = num_deployed_planes_with_type@cv_small_plane_airframe }
				
				

				check_variable = { current_fighters = ITA_missiolinis_fighters_goal compare = greater_than_or_equals }
			}
			#Bombers
			custom_trigger_tooltip = {
				tooltip = ITA_missiolini_strengthen_the_airforce_bombers_goal_tt
				#CAS
				set_temp_variable = { current_cas = num_equipment@small_plane_cas_airframe }
				add_to_temp_variable = { current_cas = num_deployed_planes_with_type@small_plane_cas_airframe }
				#CV CAS
				#add_to_temp_variable = { current_cas = num_equipment@cv_small_plane_cas_airframe }
				#add_to_temp_variable = { current_cas = num_deployed_planes_with_type@cv_small_plane_cas_airframe }
				#Naval Bombers
				set_temp_variable = { current_naval_bombers = num_equipment@small_plane_naval_bomber_airframe }
				add_to_temp_variable = { current_naval_bombers = num_deployed_planes_with_type@small_plane_naval_bomber_airframe }
				#CV Naval Bombers
				#add_to_temp_variable = { current_naval_bombers = num_equipment@cv_small_plane_naval_bomber_airframe }
				#add_to_temp_variable = { current_naval_bombers = num_deployed_planes_with_type@cv_small_plane_naval_bomber_airframe }

				#Tactical Bombers
				set_temp_variable = { current_tactical_bombers = num_equipment@medium_plane_airframe }
				add_to_temp_variable = { current_tactical_bombers = num_deployed_planes_with_type@medium_plane_airframe }
				OR = {
					#CAS
					check_variable = { current_cas = ITA_missiolinis_cas_goal compare = greater_than_or_equals }
					#Naval Bombers
					check_variable = { current_naval_bombers = ITA_missiolinis_naval_bombers_goal compare = greater_than_or_equals }
					#Tactical Bombers
					check_variable = { current_tactical_bombers = ITA_missiolinis_tactical_bombers_goal compare = greater_than_or_equals }
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_strengthen_the_airforce_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.72 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_strengthen_the_airforce_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.73 hours = 1 }
			}
		}
	}

	# Industrial Research
	ITA_missiolini_industrial_research = {
		icon = GFX_decision_generic_wreckers
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			#ASSIGN TECH GOAL
			if = { #Production - Advanced Machine Tools
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_production_flag value = 1 }
				}
				has_tech = advanced_machine_tools
			}
			else_if = { #Production - Assembly Line Production
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_production_flag value = 2 }
				}
				has_tech = assembly_line_production
			}
			else_if = { #Production - Flexible Line / Streamlined Line
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_production_flag value = 3 }
				}
				OR = {
					has_tech = flexible_line
					has_tech = streamlined_line
				}
			}
			else_if = { #Industry - Concentrated Industry 3 / Dispersed Industry 3
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_industry_flag value = 1 }
				}
				OR = {
					has_tech = concentrated_industry3
					has_tech = dispersed_industry3
				}
			}
			else_if = { #Industry - Concentrated Industry 4 / Dispersed Industry 4
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_industry_flag value = 2 }
				}
				OR = {
					has_tech = concentrated_industry4
					has_tech = dispersed_industry4
				}
			}
			else_if = { #Industry - Concentrated Industry 5 / Dispersed Industry 5
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_industry_flag value = 3 }
				}
				OR = {
					has_tech = concentrated_industry5
					has_tech = dispersed_industry5
				}
			}
			else_if = { #Construction - Construction 3
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_construction_flag value = 1 }
				}
				has_tech = construction3
			}
			else_if = { #Construction - Construction 4
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_construction_flag value = 2 }
				}
				has_tech = construction4
			}
			else_if = { #Construction - Construction 5
				limit = {
					has_country_flag = { flag = ITA_missiolini_research_construction_flag value = 3 }
				}
				has_tech = construction5
			}
			else = { #Absurd fallback just in case
				is_special_project_completed = sp:sp_nuclear_bomb
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_industrial_research_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.82 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_industrial_research_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.83 hours = 1 }
			}
		}
	}

	# Expand Intelligence Agency
	ITA_missiolini_expand_intelligence_agency = {
		icon = GFX_decision_onmap_recruit_operative
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			#ASSIGN INTEL AGENCY GOAL
			if = { #Create Intel Agency
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 1 }
				}
				has_intelligence_agency = yes
			}
			else_if = { #Upgrade - Form Cryptology Department
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 2 }
				}
				has_done_agency_upgrade = upgrade_form_department
			}
			else_if = { #Production - Form Army Department
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 3 }
				}
				has_done_agency_upgrade = upgrade_army_department
			}
			else_if = { #Production - Anti-Partisan
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 4 }
				}
				has_done_agency_upgrade = upgrade_anti_partisan
			}
			else_if = { #Production - Passive Defense
				limit = {
					has_country_flag = { flag = ITA_missiolini_upgrade_agency_goal_flag value = 5 }
				}
				has_done_agency_upgrade = upgrade_passive_defense
			}
			else = { #Absurd fallback just in case
				agency_upgrade_number > 30 #31 is max
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_expand_intelligence_service_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.92 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_expand_intelligence_service_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.93 hours = 1 }
			}
		}
	}

	# Occupy Albania
	ITA_missiolini_occupy_albania = {
		icon = GFX_decision_infiltrate_state
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			44 = { #ALBANIA
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
			805 = { #NORTHERN EPIRUS
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
			934 = { #SHKÃ–DER
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		cosmetic_tag = ALB
		cosmetic_ideology = neutrality

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_occupy_albania_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.102 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_occupy_albania_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.103 hours = 1 }
			}
		}
	}

	# Occupy Dalmatia
	ITA_missiolini_occupy_dalmatia = {
		icon = GFX_decision_infiltrate_state
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			103 = { #DALMATIA
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		cosmetic_tag = YUG
		cosmetic_ideology = neutrality

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_occupy_dalmatia_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.112 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_occupy_dalmatia_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.113 hours = 1 }
			}
		}
	}

	# Occupy Greece
	ITA_missiolini_occupy_greece = {
		icon = GFX_decision_infiltrate_state
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			185 = { #EPIRUS
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
			47 = { #ATTICA
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
			186 = { #PELOPONNESE
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		cosmetic_tag = GRE
		cosmetic_ideology = neutrality

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_occupy_greece_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.122 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_occupy_greece_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.123 hours = 1 }
			}
		}
	}

	# Occupy Ticino
	ITA_missiolini_occupy_ticino = {
		icon = GFX_decision_infiltrate_state
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			846 = { #TICINO
				OR = {
					is_fully_controlled_by = ROOT
					controller = {
						is_subject_of = ROOT
						hidden_trigger = { #To prevent unnecessary overcrowding
							has_full_control_of_state = PREV
						}
					}
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		cosmetic_tag = SWI
		cosmetic_ideology = democratic

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_occupy_ticino_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.132 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_occupy_ticino_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.133 hours = 1 }
			}
		}
	}






	# Bolster Political Cabinet
	ITA_missiolini_bolster_political_cabinet = {
		icon = GFX_decision_generic_political_discourse
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			custom_trigger_tooltip = {
				tooltip = ITA_missiolini_bolster_political_cabinet_trigger_tt
				amount_taken_ideas = {
					amount > 2
					slots = { political_advisor }
				}
				OR = {
					has_idea = ITA_gian_galeazzo_ciano
					has_idea = ITA_dino_grandi
					has_idea = ITA_giuseppe_bottai
					has_idea = ITA_renato_ricci
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_bolster_political_cabinet_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.202 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_bolster_political_cabinet_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.203 hours = 1 }
			}
		}
	}

	# Bolster Military High Command
	ITA_missiolini_bolster_military_high_command = {
		icon = GFX_decision_generic_army_support
		allowed = {
			tag = ITA
		}

		visible = {
			ITA_missiolinis_system_available = yes
		}

		available = { #GOAL
			custom_trigger_tooltip = {
				tooltip = ITA_missiolini_bolster_military_high_command_trigger_tt
				amount_taken_ideas = {
					amount > 2
					#category = { military_staff }
					slots = { high_command }
				}
			}
		}

		activation = {
			always = no
		}

		cancel_if_not_visible = yes
		is_good = no #Tooltip purposes
		selectable_mission = no
		days_mission_timeout = ITA_missiolinis_default_days

		timeout_effect = { #MISSION FAILS
			effect_tooltip = {
				ITA_missiolini_bolster_military_high_command_failure_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.212 hours = 1 }
			}
		}

		complete_effect = { #MISSION SUCCEEDS
			effect_tooltip = {
				ITA_missiolini_bolster_military_high_command_success_effect = yes
			}

			hidden_effect = {
				country_event = { id = BBA_italy_missiolinis.213 hours = 1 }
			}
		}
	}
}