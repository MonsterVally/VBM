add_namespace = BBA_italy_missiolinis
add_namespace = BBA_italy_second_italo_ethiopian_war

country_event = {
	id = BBA_italy_second_italo_ethiopian_war.2
	title = BBA_italy_second_italo_ethiopian_war.2.t
	desc = BBA_italy_second_italo_ethiopian_war.2.desc
	picture = GFX_report_event_african_soldiers
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			ITA_end_the_italo_ethiopian_war = yes
		}
	}
	#Ok - Already completed initial missiolini focus
	option = {
		name = BBA_italy_second_italo_ethiopian_war.2.a
		trigger = {
			OR = {
				has_completed_focus = ITA_solid_progress
				has_completed_focus = ITA_the_abyssinian_fiasco
				has_completed_focus = ITA_struggle_in_ethiopia
			}
		}
		if = {
			#ERITREA
			limit = {
				FROM = {
					has_full_control_of_state = 550
				}
			}
			FROM = {
				transfer_state = 550
				550 = {
					add_compliance = 50
				}
			}
		}
		if = {
			#SOMALILAND
			limit = {
				FROM = {
					has_full_control_of_state = 559
				}
			}
			FROM = {
				transfer_state = 559
				559 = {
					add_compliance = 50
				}
			}
		}
		if = {
			#JUBALAND
			limit = {
				FROM = {
					has_full_control_of_state = 844
				}
			}
			FROM = {
				transfer_state = 844
				844 = {
					add_compliance = 50
				}
			}
		}
		if = {
			#AFAR always goes to ETH if owned by ITA
			limit = {
				owns_state = 908
			}
			FROM = {
				transfer_state = 908
				908 = {
					add_compliance = 50
				}
			}
		}
		white_peace = FROM
		hidden_effect = {
			if = {
				limit = {
					any_country = {
						is_in_faction_with = ROOT
						has_war_with = FROM
					}
				}
				every_other_country = {
					limit = {
						is_in_faction_with = ROOT
						has_war_with = FROM
					}
					white_peace = FROM
				}
			}
		}
		ITA_manage_italian_defeat_in_ethiopia_effect = yes
		hidden_effect = {
			news_event = {
				id = news.337
				days = 1
			}
		}
	}
	# Ok - Abyssinian Fiasco
	option = {
		name = BBA_italy_missiolinis.02_north.b
		trigger = {
			has_dlc = "By Blood Alone"			#Abyssinian Fiasco focus not available without BBA
			NOT = {
				has_completed_focus = ITA_solid_progress
				has_completed_focus = ITA_the_abyssinian_fiasco
				has_completed_focus = ITA_struggle_in_ethiopia
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				OR = {
					ITA_is_socialist_ai = yes
					ITA_is_communist_ai = yes
				}
			}
		}
		if = {
			#ERITREA
			limit = {
				FROM = {
					has_full_control_of_state = 550
				}
			}
			FROM = {
				transfer_state = 550
				550 = {
					add_compliance = 50
				}
			}
		}
		if = {
			#SOMALILAND
			limit = {
				FROM = {
					has_full_control_of_state = 559
				}
			}
			FROM = {
				transfer_state = 559
				559 = {
					add_compliance = 50
				}
			}
		}
		if = {
			#JUBALAND
			limit = {
				FROM = {
					has_full_control_of_state = 844
				}
			}
			FROM = {
				transfer_state = 844
				844 = {
					add_compliance = 50
				}
			}
		}
		if = {
			#AFAR always goes to ETH if owned by ITA
			limit = {
				owns_state = 908
			}
			FROM = {
				transfer_state = 908
				908 = {
					add_compliance = 50
				}
			}
		}
		white_peace = FROM
		if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_struggle_in_ethiopia
				}
				NOT = {
					has_completed_focus = ITA_solid_progress
				}
			}
			if = {
				limit = {
					vbm_true_non_hist_on = no
				}
				complete_national_focus = ITA_the_abyssinian_fiasco
			}
			else_if = {
				limit = {
					vbm_true_non_hist_on = yes
				}
				vbm_true_non_hist_ita_complete_focus = yes
			}
		}
		ITA_manage_italian_defeat_in_ethiopia_effect = yes
		hidden_effect = {
			news_event = {
				id = news.337
				days = 1
			}
		}
	}
	# Ok - Struggle in Ethiopia
	option = {
		name = BBA_italy_missiolinis.02_north.c
		trigger = {
			NOT = {
				has_completed_focus = ITA_solid_progress
				has_completed_focus = ITA_the_abyssinian_fiasco
				has_completed_focus = ITA_struggle_in_ethiopia
			}
		}
		ai_chance = {
			base = 10
		}
		if = {
			#ERITREA
			limit = {
				FROM = {
					has_full_control_of_state = 550
				}
			}
			FROM = {
				transfer_state = 550
				550 = {
					add_compliance = 50
				}
			}
		}
		if = {
			#SOMALILAND
			limit = {
				FROM = {
					has_full_control_of_state = 559
				}
			}
			FROM = {
				transfer_state = 559
				559 = {
					add_compliance = 50
				}
			}
		}
		if = {
			#JUBALAND
			limit = {
				FROM = {
					has_full_control_of_state = 844
				}
			}
			FROM = {
				transfer_state = 844
				844 = {
					add_compliance = 50
				}
			}
		}
		if = {
			#AFAR always goes to ETH if owned by ITA
			limit = {
				owns_state = 908
			}
			FROM = {
				transfer_state = 908
				908 = {
					add_compliance = 50
				}
			}
		}
		white_peace = FROM
		if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_the_abyssinian_fiasco
				}
				NOT = {
					has_completed_focus = ITA_solid_progress
				}
			}
			if = {
				limit = {
					vbm_true_non_hist_on = no
				}
				complete_national_focus = ITA_struggle_in_ethiopia
			}
			else_if = {
				limit = {
					vbm_true_non_hist_on = yes
				}
				vbm_true_non_hist_ita_complete_focus = yes
			}
		}
		ITA_manage_italian_defeat_in_ethiopia_effect = yes
		hidden_effect = {
			news_event = {
				id = news.337
				days = 1
			}
		}
	}
}

country_event = {
	id = BBA_italy_missiolinis.02_north	#First Missiolini is in the Italo-Ethiopian War file
	title = BBA_italy_missiolinis.02_north.t
	desc = BBA_italy_missiolinis.02_north.desc
	picture = GFX_report_event_generic_soldiers_surrendering
	is_triggered_only = yes
	trigger = {
		ITA_missiolinis_system_available = yes
	}
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}
	# Oops (No focus to complete)
	option = {
		name = BBA_italy_missiolinis.02_north.a
		trigger = {
			OR = {
				has_completed_focus = ITA_the_abyssinian_fiasco
				has_completed_focus = ITA_struggle_in_ethiopia
				NOT = {
					has_country_flag = ITA_missiolini_conquer_the_north_failed_flag
				}
			}
		}
		ai_chance = {
			base = 10
		}
		ITA_missiolini_progress_in_ethiopia_failure_effect = yes
	}
	# Oops (Complete The Abyssinian Fiasco)
	option = {
		name = BBA_italy_missiolinis.02_north.b
		trigger = {
			has_dlc = "By Blood Alone"			#Abyssinian Fiasco focus not available without BBA
			NOT = {
				has_completed_focus = ITA_the_abyssinian_fiasco
				has_completed_focus = ITA_struggle_in_ethiopia
				has_country_flag = ITA_missiolini_conquer_the_south_failed_flag
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 1000
				OR = {
					ITA_is_socialist_ai = yes
					ITA_is_communist_ai = yes
				}
			}
		}
		ITA_missiolini_progress_in_ethiopia_failure_effect = yes
		if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_struggle_in_ethiopia
				}
				NOT = {
					has_completed_focus = ITA_solid_progress
				}
			}
			if = {
				limit = {
					vbm_true_non_hist_on = no
				}
				complete_national_focus = ITA_the_abyssinian_fiasco
			}
			else_if = {
				limit = {
					vbm_true_non_hist_on = yes
				}
				vbm_true_non_hist_ita_complete_focus = yes
			}
		}
	}
	# Oops (Complete Struggle in Ethiopia)
	option = {
		name = BBA_italy_missiolinis.02_north.c
		trigger = {
			NOT = {
				has_completed_focus = ITA_the_abyssinian_fiasco
				has_completed_focus = ITA_struggle_in_ethiopia
				has_country_flag = ITA_missiolini_conquer_the_south_failed_flag
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				OR = {
					ITA_is_socialist_ai = yes
					ITA_is_communist_ai = yes
				}
			}
		}
		ITA_missiolini_progress_in_ethiopia_failure_effect = yes
		if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_the_abyssinian_fiasco
				}
				NOT = {
					has_completed_focus = ITA_solid_progress
				}
			}
			if = {
				limit = {
					vbm_true_non_hist_on = no
				}
				complete_national_focus = ITA_struggle_in_ethiopia
			}
			else_if = {
				limit = {
					vbm_true_non_hist_on = yes
				}
				vbm_true_non_hist_ita_complete_focus = yes
			}
		}
	}
}

country_event = {
	id = BBA_italy_missiolinis.04_south	#First Missiolini is in the Italo-Ethiopian War file
	title = BBA_italy_missiolinis.04_south.t
	desc = BBA_italy_missiolinis.04_south.desc
	picture = GFX_report_event_generic_soldiers_surrendering
	is_triggered_only = yes
	trigger = {
		ITA_missiolinis_system_available = yes
	}
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			ITA_missiolinis_finalize_mission_effect = yes
			ITA_missiolinis_add_to_failed_missions = yes
		}
	}
	# Oops (No focus to complete)
	option = {
		name = BBA_italy_missiolinis.04_south.a
		trigger = {
			OR = {
				has_completed_focus = ITA_the_abyssinian_fiasco
				has_completed_focus = ITA_struggle_in_ethiopia
				NOT = {
					has_country_flag = ITA_missiolini_conquer_the_south_failed_flag
				}
			}
		}
		ai_chance = {
			base = 10
		}
		ITA_missiolini_progress_in_ethiopia_failure_effect = yes
	}
	# Oops (Complete The Abyssinian Fiasco)
	option = {
		name = BBA_italy_missiolinis.04_south.b
		trigger = {
			has_dlc = "By Blood Alone"			#Abyssinian Fiasco focus not available without BBA
			NOT = {
				has_completed_focus = ITA_the_abyssinian_fiasco
				has_completed_focus = ITA_struggle_in_ethiopia
				has_country_flag = ITA_missiolini_conquer_the_north_failed_flag
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 1000
				OR = {
					ITA_is_socialist_ai = yes
					ITA_is_communist_ai = yes
				}
			}
		}
		ITA_missiolini_progress_in_ethiopia_failure_effect = yes
		if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_struggle_in_ethiopia
				}
				NOT = {
					has_completed_focus = ITA_solid_progress
				}
			}
			if = {
				limit = {
					vbm_true_non_hist_on = no
				}
				complete_national_focus = ITA_the_abyssinian_fiasco
			}
			else_if = {
				limit = {
					vbm_true_non_hist_on = yes
				}
				vbm_true_non_hist_ita_complete_focus = yes
			}
		}
	}
	# Oops (Complete Struggle in Ethiopia)
	option = {
		name = BBA_italy_missiolinis.04_south.c
		trigger = {
			NOT = {
				has_completed_focus = ITA_the_abyssinian_fiasco
				has_completed_focus = ITA_struggle_in_ethiopia
				has_country_flag = ITA_missiolini_conquer_the_north_failed_flag
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				OR = {
					ITA_is_socialist_ai = yes
					ITA_is_communist_ai = yes
				}
			}
		}
		ITA_missiolini_progress_in_ethiopia_failure_effect = yes
		if = {
			limit = {
				NOT = {
					has_completed_focus = ITA_the_abyssinian_fiasco
				}
				NOT = {
					has_completed_focus = ITA_solid_progress
				}
			}
			if = {
				limit = {
					vbm_true_non_hist_on = no
				}
				complete_national_focus = ITA_struggle_in_ethiopia
			}
			else_if = {
				limit = {
					vbm_true_non_hist_on = yes
				}
				vbm_true_non_hist_ita_complete_focus = yes
			}
		}
	}
}
